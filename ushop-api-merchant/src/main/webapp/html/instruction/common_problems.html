<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
<title>常见问题</title>
<link rel="stylesheet" type="text/css" href="../../css/style.css?v=20180131" />
<style>
.xl-collapse-box {
	background: #fff;
	margin-top: 1px;
}
.xl-collapse-box:first-child {
	margin-top: 0;
}
.xl-collapse-btn {
	position: relative;
	display: block;
	color: #000 !important;
	font-size: 14px;
	line-height: 20px;
	padding: 10px 25px 10px 15px;
}
.xl-collapse-btn .icon {
	position: absolute;
	right: .8em;
	top: 50%;
	margin-top: -.5em;
	font-size: 1.2em;
}
.xl-collapse-btn .icon:before {
	content: "\e775";
	-webkit-transition: all .3s;
	transition: all .3s;
}
.xlcp-foot-box {
	bottom: 0;
}
.xlcp-p1 {
	padding: .5em .8em;
}

/*模态框*/
.xlcp-modal {
	top: 0;
	left: 100%;
	width: 100%;
	height: 100%;
	background: #eee;
	-webkit-transition: all .3s;
	transition: all .3s;
}
.xlcp-modal.active {
	left: 0;
}
.type_modal.active {
	z-index: 10;
}
.detail_modal.active {
	z-index: 20;
}

/*详情样式*/
.xlpin-box1 {
	padding: 15px;
	background: #fff;
}
.xlpin-box1 img {
	width: 100%;
	margin: 10px 0;
}
.xlpin-box1 h5 {
	font-size: 1.2em;
	padding-bottom: 10px;
	color: #f60;
	font-weight: bold;
}
.xlpin-box1 p {
	line-height: 25px;
	text-align: justify;
}
</style>
</head>
<body>
<div class="xlnav-box xlele-box">
	<div class="xlnav-content xlele-content">
		<img src="../../image/icon/titleBG.jpg">
		<h1 class="xlnav-title">常见问题</h1>
	</div>
</div>
<div class="xlbody-box">
	<div id="tab_con_box"></div>
</div>
<div style="height: 4em;"></div>
<div class="xlele-box xlpd-fotter xlcp-foot-box">
	<div class="xlele-content">
		<div class="xlcp-p1">如果以上方式不能解决您的问题，您还可以通过以下方式联系我们：0755-25338280-5925</div>
	</div>
</div>
<div class="xlele-box xlcp-modal" id="type_modal">
	<div class="xlele-content" style="background: none;"></div>
</div>
<div class="xlele-box xlcp-modal" id="detail_modal">
	<div class="xlele-content"></div>
</div>
<script src="../../script/jquery-1.12.4.min.js"></script>
<script src="../../script/common.js?v=20180131"></script>
<script src="../../script/defaultxl.js?v=20180131"></script>
<script type="text/javascript">
"use strict";
$(function() {
	globalData.loadReady(); //页面加载完成执行
	pageDataInit(); //页面数据初始化
	domEventFn(); //dom初始化事件绑定
	reloadDataFn(); //所有需要从服务器加载的数据请求
});

//页面启动时，数据初始化
function pageDataInit() {
	var data = [];
	$.getJSON('problems.json', function(data){
		var str = '';
		globalData.problemsData = data;
		Common.each(data, function(index, obj){
			str += 
			'<div class="xl-collapse-box">'+
				'<a class="xl-collapse-btn" href="#type_modal_id_' + obj.id + '">' + obj.title + '<i class="icon"></i></a>'+
			'</div>';
		});
		$('#tab_con_box').html(str);
		hashChangeFn();
	});
}
//dom事件绑定
function domEventFn() {
	$(window).on('hashchange', hashChangeFn);
}
//所有需要从服务器加载的数据请求
function reloadDataFn() {}

//检查哈希变化
function hashChangeFn(){
	var arr = location.hash.split('_id_'),
		h = arr[0] || '',
		tid = parseInt(arr[1]) || 0,
		did = parseInt(arr[2]) || 0;
	if(h && tid){
		if(h === '#type_modal'){
			$('#type_modal').addClass('active').find('.xlele-content').html(getDataStr(tid, did));
			$('#detail_modal').removeClass('active');
			return false;
		}else if(h === '#detail_modal'){
			$('#detail_modal').addClass('active').find('.xlele-content').html(getDataStr(tid, did));
			return false;
		}
	}
	$('#type_modal').removeClass('active');
	$('#detail_modal').removeClass('active');
}

function getDataStr(tid, did){
	var str = '';
	if(tid && did){
		Common.each(globalData.problemsData, function(index, obj){
			if(obj.id === tid){
				str = '';
				Common.each(obj.conArr, function(i, o){
					if(o.id === did){
						str = '<div class="xlpin-box1">'+
									'<h5>Q：' + o.title + '</h5>'+
									'<p>A：' + o.detail + '</p>'+
									(o['image'] ? ('<img src="' + o['image'] + '">') : '')+
								'</div>';
					}
				});
			}
		});
	}else if(tid){
		Common.each(globalData.problemsData, function(index, obj){
			if(obj.id === tid){
				str = '';
				Common.each(obj.conArr, function(i, o){
					str += 
					'<div class="xl-collapse-box">'+
						'<a class="xl-collapse-btn" href="#detail_modal_id_' + obj.id + '_id_' + o.id + '">' + (i + 1) + '、' + o.title + '<i class="icon"></i></a>'+
					'</div>';
				});
			}
		});
	}
	return str;
}

function rowClick(id){
	location.hash = '#type_modal_id_' + id;
}
</script>
	</body>

</html>