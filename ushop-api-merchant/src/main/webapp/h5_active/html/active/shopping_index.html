<!doctype html>
<html>

<head>
<meta charset="UTF-8">
<title>彩购活动-1004</title>
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
<meta name = "format-detection" content="telephone = no" />
<link rel="stylesheet" href="../../css/style.css?v=20180131"/>
<style>
body, html {
	background: #613ae0;
}
.xlf-box1 {
	position: relative;
} 
.xlf-box1 img {
	vertical-align: top;
	width: 100%;
}
.xl-btn1 {
	position: absolute;
	top: 89.143%;
	bottom: 1.414%;
	left: 17.5%;
	right: 17.5%;
}
.xl-btn1 img {
	vertical-align: top;
	width: 100%;
	height: 100%;
}
.xlf-items {
	position: absolute;
	top: 40%;
	left: 0;
	width: 100%;
}
.xlf-item {
	position: relative;
}
.xlf-item .xlf-img1 {
	position: absolute;
	top: 10.266%;
	bottom: 37.6420%;
	left: 18.055%;
	right: 62.916%;
}
.xlf-item .xlf-btn1 {
	position: absolute;
	top: 75.285%;
	bottom: 4.942%;
	left: 12.083%;
	right: 57.083%;
}
.xlf-item .xlf-img2 {
	position: absolute;
	top: 10.266%;
	bottom: 37.6420%;
	left: 63.472%;
	right: 17.5%;
}
.xlf-item .xlf-btn2 {
	position: absolute;
	top: 75.285%;
	bottom: 4.942%;
	left: 57.5%;
	right: 11.528%;
}
.xlf-item .xlf-img1,
.xlf-item .xlf-img2 {
	margin-top: -5px;
}
.xlf-item .xlf-img1 img,
.xlf-item .xlf-img2 img {
	width: 100%;
	height: 100%;
	padding: 5px;
}
.xlf-item span {
	position:absolute;
	bottom: -8px;
	left: -26px;
	right: -26px;
	text-align: center;
	font-size: 12px;
	line-height: 1;
}
.xlf-item .xlf-btn1:active,
.xlf-item .xlf-btn2:active {
	background: rgba(0,0,0,.1);
}
</style>
</head>

<body>
<div class="xlnav-box xlele-box">
	<div class="xlnav-content xlele-content">
		<img class="xl-head-bg" src="../../images/title_bg.jpg">
		<h1 class="xlnav-title">活动详情</h1>
	</div>
</div>
<div class="xlbody-box">
	<div class="xlf-box1">
		<img src="../../images/shopping_img002.png"/>
		<a class="xl-btn1 xlbtn-active" onclick="clb_android.toStore(0)"><img src="../../images/shopping_img003.png"></a>
		<div class="xlf-items" id="items_box">
			<!--<div class="xlf-item">
				<img src="../../images/shopping_img001.png">
				<div class="xlf-img1">
					<img src="../../images/p200200.png">
					<span class="text-ellipsis">中国人</span>
				</div>
				<a class="xlf-btn1"></a>
				<div class="xlf-img2">
					<img src="../../images/p200200.png">
					<span class="text-ellipsis">中国人中国人中国人中国人中国人中国人中国人</span>
				</div>
				<a class="xlf-btn2"></a>
			</div>-->
		</div>
	</div>
</div>
<script src="../../js/common.js"></script>
<script>
"use strict";
Common.ready(function(){
	pageDataInit();//页面数据初始化
	domEventFn();//dom初始化事件绑定
	reloadDataFn();//所有需要从服务器加载的数据请求
});

//页面启动时，数据初始化
function pageDataInit(){
}
//dom事件绑定
function domEventFn(){
}
//所有需要从服务器加载的数据请求
function reloadDataFn(){
	getProductFn();//请求数据
}

function getProductFn(){
	var _param = {
		url: Common.domainUrl + '/ushop-api-merchant/api/mall/product/search/listByStyle/0/1/1/1.json'
	}
	xlkuajax(_param, function(data){
		var str = '', obj1, detail;
		if(parseInt(data.totalCount) > 0){
			Common.each(data.recordList, function(index, obj){
				if(index < 4){
					obj.object = obj.object || {};
					if(index%2 == 1){
						str +=   '<div class="xlf-item">'+
									'<img src="../../images/shopping_img001.png">'+
									'<div class="xlf-img1" onclick="clb_android.toGoodsDetail(' + obj1.id + ')">'+
										'<img src="' + obj1.headImage + '">'+
										'<span class="text-ellipsis">' + obj1.productName + '</span>'+
									'</div>'+
									'<a class="xlf-btn1" onclick="clb_android.toGoodsDetail(' + obj1.id + ')"></a>'+
									'<div class="xlf-img2" onclick="clb_android.toGoodsDetail(' + obj.id + ')">'+
										'<img src="' + obj.headImage + '">'+
										'<span class="text-ellipsis">' + obj.productName + '</span>'+
									'</div>'+
									'<a class="xlf-btn2" onclick="clb_android.toGoodsDetail(' + obj.id + ')"></a>'+
								'</div>';
					}else{
						obj1 = obj;
					}
				}
			});
			document.getElementById('items_box').innerHTML = str;
		}else{
			Common.toast('未请求到数据！');
		}
	});
}

//ajax方法封装，可独立使用，不依赖任何库，和上面也没有关系
function xlkuajax(_param, callback){
	callback = _param.callback || callback || function(){};
	var _a = {
		url: '',//请求地址
		type: 'get',//请求方式
		dataType: 'json',//返回数据类型
		timeout: 20000,//超时终止
		data: {},//需要传递的参数
		async: true,//默认异步请求
		headers: {},//请求的头信息
		processData: true//是否处理数据，以form传输
	},
	parseObj = function(obj){//序列化对象
		var s = [], k, v;
		for(k in obj){
			v = obj[k];
			v = typeof v === 'function' ? (v() + '') : ((v + '') || '');
			s[s.length] = encodeURIComponent(k) + '=' + encodeURIComponent(v);
		}
		return s.join( '&' ).replace(/%20/g, '+');
	};
	for(var pn in _param){//合并对象
		_a[pn] = _param[pn];
	}
	var xhr = new XMLHttpRequest(),
		headers = _a.headers || {},
		data = _a.data || {},
		tt;//计时器ID
	xhr.onreadystatechange = function() {
		if(xhr.readyState == 4) {
			clearTimeout(tt);
			if((xhr.status >= 200 && xhr.status < 300) || xhr.status == 304) {
				if((_a.dataType).toLocaleLowerCase() === 'json'){
					var rdata = JSON.parse(xhr.responseText + '');
					callback(rdata);
				}else{
					callback(xhr.responseText + '');
				}
			} else {
				callback(xhr, xhr.status);
			}
		}
	};
	if (_a.async && _a.timeout > 0) {//设置timeout
		tt = setTimeout(function(){
			xhr.abort();
		}, _a.timeout);
	}
	xhr.open(_a.type, _a.url, _a.async);//初始化xhr
	if (_a.processData) {
		xhr.setRequestHeader(//默认发送的数据类型
			'content-type',
			'application/x-www-form-urlencoded; charset=UTF-8'
		);
		data = parseObj(data);
	}else{
		if(typeof data === 'object'){
			if(Object.prototype.toString.call(data) != '[object FormData]'){
				data = JSON.stringify(data);
			}
		}else{
			data = (data + '');
		}
	}
	for(var hn in headers){//设置头信息
		xhr.setRequestHeader(hn, headers[hn]);
	}
	xhr.send(data);
}
</script>
</body>

</html>